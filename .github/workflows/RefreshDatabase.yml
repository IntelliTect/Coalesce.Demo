name: Refresh Database

on:
  schedule: 
    - cron: "0 0 * * *"
  workflow_dispatch:
jobs:
  RefreshData:
    runs-on: ubuntu-latest
    env:
      CONNECTION_STRING: ${{ secrets.CONNECTION_STRING }} 
    steps:
      - uses: actions/checkout@v2
      - name: Setup Python
        uses: actions/setup-python@v2.2.2
      - uses: BSFishy/pip-action@v1
        with:
          packages: pyodbc
      - run: |
          import os
          print(os.environ)
          dropFile = open("./RefreshDB/DropValues.sql", "r")
          insertFile = open("./RefreshDB/InsertSeededValues.sql", "r")

          dropQuery = dropFile.read()
          insertQuery = insertFile.read()

          print(dropQuery)
          print(insertQuery)
          
